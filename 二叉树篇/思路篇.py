"""
åŠ›æ‰£ç¬¬ 226 é¢˜ã€Œç¿»è½¬äºŒå‰æ ‘ã€
"""
# ã€Œéå†ã€çš„æ€ç»´æ¨¡å¼è§£å†³
"""
å‰åºï¼šåœ¨é€’å½’å¤„ç†å·¦å³å­æ ‘ä¹‹å‰å¤„ç†å½“å‰èŠ‚ç‚¹
ä¸­åºï¼šåœ¨å¤„ç†å®Œå·¦å­æ ‘ï¼Œå³å°†è¿›å…¥å³å­æ ‘ä¹‹å‰å¤„ç†å½“å‰èŠ‚ç‚¹
ååºï¼šåœ¨å·¦å³å­æ ‘éƒ½å¤„ç†å®Œåå¤„ç†å½“å‰èŠ‚ç‚¹

âŒ ä¸ºä»€ä¹ˆä¸èƒ½æ”¾åœ¨ä¸­åºä½ç½®ï¼Ÿ
é—®é¢˜åœ¨äºï¼š
    ä½ å…ˆè®¿é—®äº†å·¦å­æ ‘
    ç„¶åäº¤æ¢äº†å·¦å³
    æ¥ç€å†è®¿é—®å³å­æ ‘ï¼ˆæ­¤æ—¶çš„å³å­æ ‘ï¼Œå…¶å®åŸæ¥æ˜¯å·¦å­æ ‘ï¼‰
è¿™å°±ç­‰äºä½ æŠŠå·¦å­æ ‘éå†äº†ä¸¤æ¬¡ï¼Œè€ŒåŸæœ¬çš„å³å­æ ‘æ²¡æœ‰éå†åˆ°ï¼Œé€ æˆä¸¥é‡é”™è¯¯ã€‚
"""
class Solution:
    # ä¸»å‡½æ•°
    def invertTree(self, root):
        # éå†äºŒå‰æ ‘ï¼Œäº¤æ¢æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹
        self.traverse(root)
        return root

    # äºŒå‰æ ‘éå†å‡½æ•°
    def traverse(self, root):
        if not root:
            return 
        
        # *** å‰åºä½ç½® ***
        # æ¯ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦åšçš„äº‹å°±æ˜¯äº¤æ¢å®ƒçš„å·¦å³å­èŠ‚ç‚¹
        tmp = root.left
        root.left = root.right
        root.right = tmp

        # éå†æ¡†æ¶ï¼Œå»éå†å·¦å³å­æ ‘çš„èŠ‚ç‚¹
        self.traverse(root.left)
        self.traverse(root.right)


# ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´æ¨¡å¼è§£å†³
"""
å¯ä»¥ç”¨ invertTree(x.left) å…ˆæŠŠ x çš„å·¦å­æ ‘ç¿»è½¬ï¼Œå†ç”¨ invertTree(x.right) æŠŠ x çš„å³å­æ ‘ç¿»è½¬ï¼Œ
æœ€åæŠŠ x çš„å·¦å³å­æ ‘äº¤æ¢ï¼Œè¿™æ°å¥½å®Œæˆäº†ä»¥ x ä¸ºæ ¹çš„æ•´æ£µäºŒå‰æ ‘çš„ç¿»è½¬ï¼Œå³å®Œæˆäº† invertTree(x) çš„å®šä¹‰ã€‚
"""

class Solution:
    # å®šä¹‰ï¼šå°†ä»¥ root ä¸ºæ ¹çš„è¿™æ£µäºŒå‰æ ‘ç¿»è½¬ï¼Œè¿”å›ç¿»è½¬åçš„äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
    def invertTree(self, root):
        if root is None:
            return None
        # åˆ©ç”¨å‡½æ•°å®šä¹‰ï¼Œå…ˆç¿»è½¬å·¦å³å­æ ‘
        left = self.invertTree(root.left)
        right = self.invertTree(root.right)

        # ç„¶åäº¤æ¢å·¦å³å­èŠ‚ç‚¹
        root.left, root.right = right, left

        # å’Œå®šä¹‰é€»è¾‘è‡ªæ°ï¼šä»¥ root ä¸ºæ ¹çš„è¿™æ£µäºŒå‰æ ‘å·²ç»è¢«ç¿»è½¬ï¼Œè¿”å› root
        return root
    

"""
116. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ | åŠ›æ‰£ | LeetCode |  ğŸŸ 
"""

# âŒé”™è¯¯ç¤ºä¾‹
# å­™å­çº§çš„ï¼Œçˆ¸çˆ¸1çš„å³å„¿å­ï¼Œ çˆ¸çˆ¸2çš„å·¦å„¿å­è¿ä¸ä¸Š
def traverse(root):
    if root is None or root.left is None:
        return
    # æŠŠå·¦å­èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘å³å­èŠ‚ç‚¹
    root.left.next = root.right

    traverse(root.left)
    traverse(root.right)

"""
# è¿™æ ·ï¼Œä¸€æ£µäºŒå‰æ ‘è¢«æŠ½è±¡æˆäº†ä¸€æ£µä¸‰å‰æ ‘ï¼Œä¸‰å‰æ ‘ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹å°±æ˜¯åŸå…ˆäºŒå‰æ ‘çš„ä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹ã€‚
# ç°åœ¨ï¼Œæˆ‘ä»¬åªè¦å®ç°ä¸€ä¸ª traverse å‡½æ•°æ¥éå†è¿™æ£µä¸‰å‰æ ‘ï¼Œæ¯ä¸ªã€Œä¸‰å‰æ ‘èŠ‚ç‚¹ã€éœ€è¦åšçš„äº‹å°±æ˜¯æŠŠè‡ªå·±å†…éƒ¨çš„ä¸¤ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹ç©¿èµ·æ¥ï¼š
"""
class Solution:
    # ä¸»å‡½æ•°
    def connect(self, root: 'Node') -> 'Node':
        if not root:
            return None
        # éå†ã€Œä¸‰å‰æ ‘ã€ï¼Œè¿æ¥ç›¸é‚»èŠ‚ç‚¹
        self.traverse(root.left, root.right)
        return root

    # ä¸‰å‰æ ‘éå†æ¡†æ¶
    def traverse(self, node1: 'Node', node2: 'Node') -> None:
        if not node1 or not node2:
            return
        # å‰åºä½ç½® 
        # å°†ä¼ å…¥çš„ä¸¤ä¸ªèŠ‚ç‚¹ç©¿èµ·æ¥
        node1.next = node2 
        
        # è¿æ¥ç›¸åŒçˆ¶èŠ‚ç‚¹çš„ä¸¤ä¸ªå­èŠ‚ç‚¹
        self.traverse(node1.left, node1.right)
        self.traverse(node2.left, node2.right)
        # è¿æ¥è·¨è¶Šçˆ¶èŠ‚ç‚¹çš„ä¸¤ä¸ªå­èŠ‚ç‚¹
        self.traverse(node1.right, node2.left)



"""1ã€è¿™é¢˜èƒ½ä¸èƒ½ç”¨ã€Œéå†ã€çš„æ€ç»´æ¨¡å¼è§£å†³ï¼Ÿ

    ä¹ä¸€çœ‹æ„Ÿè§‰æ˜¯å¯ä»¥çš„ï¼šå¯¹æ•´æ£µæ ‘è¿›è¡Œå‰åºéå†ï¼Œä¸€è¾¹éå†ä¸€è¾¹æ„é€ å‡ºä¸€æ¡ã€Œé“¾è¡¨ã€å°±è¡Œäº†ï¼š
    ä½†æ˜¯æ³¨æ„ flatten å‡½æ•°çš„ç­¾åï¼Œè¿”å›ç±»å‹ä¸º voidï¼Œä¹Ÿå°±æ˜¯è¯´é¢˜ç›®å¸Œæœ›æˆ‘ä»¬åœ¨åŸåœ°æŠŠäºŒå‰æ ‘æ‹‰å¹³æˆé“¾è¡¨ã€‚
    è¿™æ ·ä¸€æ¥ï¼Œæ²¡åŠæ³•é€šè¿‡ç®€å•çš„äºŒå‰æ ‘éå†æ¥è§£å†³è¿™é“é¢˜äº†ã€‚"""
# ğŸ”¥ è¿˜æ˜¯å€¼å¾—æ³¨æ„ä¸€ä¸‹è¿™ç§å†™æ³•
# è™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼Œdummy.right å°±æ˜¯ç»“æœ
dummy = TreeNode(-1)
# ç”¨æ¥æ„å»ºé“¾è¡¨çš„æŒ‡é’ˆ
p = dummy

def traverse(root: TreeNode):
    if root is None:
        return
    # å‰åºä½ç½®
    p.right = TreeNode(root.val)
    p = p.right

    traverse(root.left)
    traverse(root.right)

"""
æ­£ç¡®æ€è·¯
ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥
å’Œå­æ ‘æœ‰å…³ï¼Œåœ¨ååºä½ç½®å†™ä»£ç äº†ã€‚
ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥
1ã€å…ˆåˆ©ç”¨ flatten(x.left) å’Œ flatten(x.right) å°† x çš„å·¦å³å­æ ‘æ‹‰å¹³ã€‚

2ã€å°† x çš„å³å­æ ‘æ¥åˆ°å·¦å­æ ‘ä¸‹æ–¹ï¼Œç„¶åå°†æ•´ä¸ªå·¦å­æ ‘ä½œä¸ºå³å­æ ‘ã€‚
    1
   / \
  2   5
 / \   \
3   4   6

    1
   / \
  2   5
   \   \
    3   6
     \
      4


1
 \
  2
   \
    3
     \
      4
       \
        5
         \
          6

"""
class Solution:
    # å®šä¹‰ï¼šå°†ä»¥ root ä¸ºæ ¹çš„æ ‘æ‹‰å¹³ä¸ºé“¾è¡¨
    def flatten(self, root) -> None:
        # base case
        if root is None:
            return

        # åˆ©ç”¨å®šä¹‰ï¼ŒæŠŠå·¦å³å­æ ‘æ‹‰å¹³
        self.flatten(root.left)
        self.flatten(root.right)
        """
        æ³¨æ„é€‰ååºä½ç½®ï¼Œè‡ªä¸‹è€Œä¸Šçš„è¿­ä»£
        """
        # ååºéå†ä½ç½®
        # 1ã€å·¦å³å­æ ‘å·²ç»è¢«æ‹‰å¹³æˆä¸€æ¡é“¾è¡¨
        left = root.left
        right = root.right

        # 2ã€å°†å·¦å­æ ‘ä½œä¸ºå³å­æ ‘
        root.left = None
        root.right = left

        # 3ã€å°†åŸå…ˆçš„å³å­æ ‘æ¥åˆ°å½“å‰å³å­æ ‘çš„æœ«ç«¯
        p = root
        while p.right is not None:
            p = p.right
        p.right = right 