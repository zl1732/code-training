1. é€‰æ‹©æ’åº
2. å†’æ³¡æ’åº


| ç®—æ³•         | æ—¶é—´å¤æ‚åº¦           | ç©ºé—´     | ç¨³å®šæ€§   | å¤‡æ³¨           |
| ----------- | ------------------ | ---------| ------- | ------------ |
| å†’æ³¡ Bubble  | O(nÂ²)              | O(1)     | âœ… ç¨³å®š  | å°å­¦ç®—æ³•ï¼Œäº†è§£å³å¯    |
| é€‰æ‹© Select  | O(nÂ²)              | O(1)     | âŒ ä¸ç¨³å®š | æ°¸è¿œé€‰æ‹©æœ€å°ï¼Œå®¹æ˜“è·³ä½ç½® |
| æ’å…¥ Insert  | O(nÂ²) / O(n)       | O(1)     | âœ… ç¨³å®š  | å±€éƒ¨æœ‰åº/å‡ ä¹æœ‰åºæ—¶å¾ˆå¿« |
| å¸Œå°” Shell   | O(n^1.3 \~ n^1.6)  | O(1)     | âŒ ä¸ç¨³å®š | æ’å…¥æ’åºçš„ä¼˜åŒ–      |
| å¿«é€Ÿ Quick   | O(n log n) / O(nÂ²) | O(log n) | âŒ ä¸ç¨³å®š | é¢è¯•å¿…ä¼šï¼Œå¿«ä¸”åŸåœ°    |
| å½’å¹¶ Merge   | O(n log n)         | O(n)     | âœ… ç¨³å®š   | é¢è¯•å¿…ä¼šï¼Œç¨³å®šä½†ç”¨ç©ºé—´  |
| å †æ’ Heap    | O(n log n)         | O(1)     | âŒ ä¸ç¨³å®š | å»ºå † + æ¯æ¬¡å–æœ€å¤§   |
| æ¡¶æ’åº Bucket | O(n + k)\~O(nÂ²)   | O(n + k) | âœ…       | é€‚åˆå‡åŒ€å°æ•°ï¼Œéé€šç”¨   |
| åŸºæ•°æ’åº Radix | O(nk)             | O(n + k) | âœ…      | æ•´æ•°æ’åºã€å®šé•¿å­—ç¬¦ä¸²ä¸“ç”¨ |


| ä¼šå†™ä»£ç  + ä¼šè®²åŸç†         |
| ------------------- |
| âœ… å¿«æ’ï¼ˆé‡ç‚¹ï¼‰            |
| âœ… å½’å¹¶ï¼ˆå’Œå¿«æ’äº’è¡¥ï¼‰         |
| âœ… å †æ’åºï¼ˆå’Œ heap ç»“æ„ä¸€èµ·å­¦ï¼‰ |
| âœ… æ’å…¥æ’åºï¼ˆè€ƒç»†èŠ‚/ä¼˜åŒ–ï¼‰      |


#### 1. é€‰æ‹©æ’åº ####
é€‰æ‹©æ’åºï¼ˆæœ´ç´ æ€ç»´ï¼‰ï¼š
    å³æ¯æ¬¡éƒ½å»éå†é€‰æ‹©æœ€å°çš„å…ƒç´ 
    å…ˆéå†ä¸€éæ•°ç»„ï¼Œæ‰¾åˆ°æ•°ç»„ä¸­çš„æœ€å°å€¼ï¼Œç„¶åæŠŠå®ƒå’Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ äº¤æ¢ä½ç½®ï¼›
    æ¥ç€å†éå†ä¸€éæ•°ç»„ï¼Œæ‰¾åˆ°ç¬¬äºŒå°çš„å…ƒç´ ï¼Œå’Œæ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ äº¤æ¢ä½ç½®ï¼›
    ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ•´ä¸ªæ•°ç»„æœ‰åºã€‚

ç‰¹ç‚¹:
    å³ä¾¿æ•´ä¸ªæ•°ç»„å·²ç»æ˜¯æœ‰åºçš„ï¼Œå®ƒè¿˜æ˜¯ä¼šæ‰§è¡Œ n^2 / 2 æ¬¡ï¼Œå³åŸå§‹æ•°æ®çš„æœ‰åºåº¦å¯¹ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ²¡æœ‰ä»»ä½•å½±å“ã€‚
    å­˜åœ¨å†—ä½™è®¡ç®—

def sort(nums: List[int]) -> None:
    n = len(nums)
    # sortedIndex æ˜¯ä¸€ä¸ªåˆ†å‰²çº¿
    # ç´¢å¼• < sortedIndex çš„å…ƒç´ éƒ½æ˜¯å·²æ’åºçš„
    # ç´¢å¼• >= sortedIndex çš„å…ƒç´ éƒ½æ˜¯æœªæ’åºçš„
    # åˆå§‹åŒ–ä¸º 0ï¼Œè¡¨ç¤ºæ•´ä¸ªæ•°ç»„éƒ½æ˜¯æœªæ’åºçš„
    sortedIndex = 0
    while sortedIndex < n:
        # æ‰¾åˆ°æœªæ’åºéƒ¨åˆ† [sortedIndex, n) ä¸­çš„æœ€å°å€¼
        minIndex = sortedIndex
        for i in range(sortedIndex + 1, n):
            if nums[i] < nums[minIndex]:
                minIndex = i
        # äº¤æ¢æœ€å°å€¼å’Œ sortedIndex å¤„çš„å…ƒç´ 
        nums[sortedIndex], nums[minIndex] = nums[minIndex], nums[sortedIndex]

        # sortedIndex åç§»ä¸€ä½
        sortedIndex += 1


æ€è€ƒï¼š
    åœ¨éå† nums[0..] çš„æ—¶å€™ï¼Œå…¶å®å·²ç»éå†è¿‡ nums[1..] å’Œ nums[2..] çš„æ‰€æœ‰å…ƒç´ äº†
    å¦‚æœèƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥æ¶ˆæ‰å†…å±‚çš„ for å¾ªç¯ï¼Œä»æŠŠæ—¶é—´å¤æ‚åº¦é™ä½ä¸€ä¸ªæ•°é‡çº§ï¼Ÿï¼ˆä¸èƒ½ï¼ï¼ï¼‰

    å‡è®¾ç°åœ¨æˆ‘çŸ¥é“äº† nums[0..] ä¸­çš„æœ€å°å…ƒç´ ï¼Œæˆ‘æ˜¯å¦èƒ½å¤Ÿæ¨å¯¼å‡º nums[1..] ä¸­çš„æœ€å°å…ƒç´ å‘¢ï¼Ÿ âŒ
    å‡è®¾ç°åœ¨æˆ‘çŸ¥é“äº† nums[1..] ä¸­çš„æœ€å°å…ƒç´ ï¼Œæˆ‘æ˜¯å¦èƒ½å¤Ÿæ¨å¯¼å‡º nums[0..] ä¸­çš„æœ€å°å…ƒç´ å‘¢ï¼Ÿ âœ…


    ä¸ºä»€ä¹ˆä¸èƒ½ï¼š
        é—®é¢˜çš„å…³é”®åœ¨äºäº¤æ¢æ“ä½œã€‚
        suffixMin æ•°ç»„æ­£ç¡®å·¥ä½œæœ‰ä¸ªå‰æï¼Œå°±æ˜¯ nums æ•°ç»„ä¸å¯å˜ã€‚
        å¦‚æœ nums[i] çš„å€¼å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆæ‰€æœ‰ suffixMin[0..i] å­˜å‚¨çš„æœ€å°å€¼å°±å¤±æ•ˆäº†ï¼Œéœ€è¦é‡æ–°è®¡ç®—ä¸€æ¬¡æ‰è¡Œã€‚



é€‰æ‹©æ’åº ä¸ç¨³å®šï¼š
    ç›¸åŒå…ƒç´ çš„ç›¸å¯¹ä½ç½®ä¸ä¼šå‘ç”Ÿå˜åŒ–æ‰èƒ½ç§°ä¸ºç¨³å®šæ’åºã€‚ä½ ä¸¾ä¸ªç®€å•çš„ä¾‹å­å°±çœ‹å‡ºè¿™ä¸ªç®—æ³•ä¸ç¨³å®šäº†ï¼š
    [2', 2''', 2'', 1]

    å¦‚æœè¿™ä¸ªæ’åºç®—æ³•æ˜¯ç¨³å®šçš„ï¼Œé‚£ä¹ˆæ’åºåçš„ç»“æœåº”è¯¥ä¿æŒä¸‰ä¸ª 2 çš„ç›¸å¯¹é¡ºåºï¼š
    [1, 2', 2''', 2'']

    ä½†å®é™…ä¸Šï¼Œç¬¬ä¸€æ¬¡å¯»æ‰¾æœ€å°å€¼æ—¶ï¼Œè‚¯å®šä¼šæŠŠå…ƒç´  2' å’Œ 1 äº¤æ¢ï¼Œè¿™ä¸€ä¸‹å°±ä¼šæ‰“ä¹± 2 ä¹‹é—´çš„ç›¸å¯¹é¡ºåºäº†ï¼š
    [1, 2''', 2'', 2']  '


ç¨³å®šï¼š
    äº¤æ¢ vs å¹³ç§»
    ä¸è¦ç›´æ¥äº¤æ¢ã€‚è€Œæ˜¯å°†å…ƒç´ æ•´ä½“å‘åç§»åŠ¨ä¸€ä½ æŠŠåº”è¯¥å»çš„ä½ç½®ç©ºå‡ºæ¥è®© nums[sortedIndex] å¹³ç§»è¿‡å»ã€‚

# å¯¹é€‰æ‹©æ’åºè¿›è¡Œç¬¬ä¸€æ³¢ä¼˜åŒ–ï¼Œè·å¾—äº†ç¨³å®šæ€§
def sort(nums):
    n = len(nums)
    sortedIndex = 0
    while sortedIndex < n:
        # åœ¨æœªæ’åºéƒ¨åˆ†ä¸­æ‰¾åˆ°æœ€å°å€¼ nums[minIndex]
        minIndex = sortedIndex
        for i in range(sortedIndex + 1, n):
            if nums[i] < nums[minIndex]:
                minIndex = i

        # ä¼˜åŒ–ï¼šå°† nums[minIndex] æ’å…¥åˆ° nums[sortedIndex] çš„ä½ç½®
        # å°† nums[sortedIndex..minIndex] çš„å…ƒç´ æ•´ä½“å‘åç§»åŠ¨ä¸€ä½
        minVal = nums[minIndex]
        # æ•°ç»„æ¬ç§»æ•°æ®çš„æ“ä½œ
        """
        è¿™é‡ŒåˆåŠ äº†ä¸€ä¸ª for å¾ªç¯ï¼Œå®é™…æ‰§è¡Œæ¬¡æ•°è‚¯å®šä¼šå¤§äºæ ‡å‡†é€‰æ‹©æ’åº 
        èƒ½ä¸èƒ½è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œé¿å…è¿™ä¸ªé¢å¤–çš„ for å¾ªç¯ã€‚
        """
        for i in range(minIndex, sortedIndex, -1):
            nums[i] = nums[i - 1]
        nums[sortedIndex] = minVal

        sortedIndex += 1




#### 2. å†’æ³¡æ’åº ####
åªäº¤æ¢ç›¸é‚»çš„é€†åºå¯¹å„¿ï¼Œä¸ä¼šå»ç¢°å€¼ç›¸åŒçš„å…ƒç´ ï¼Œæ‰€ä»¥è¿™ä¸ªç®—æ³•æ˜¯ç¨³å®šæ’åºã€‚

# å¯¹é€‰æ‹©æ’åºè¿›è¡Œç¬¬äºŒæ³¢ä¼˜åŒ–ï¼Œè·å¾—ç¨³å®šæ€§çš„åŒæ—¶é¿å…é¢å¤–çš„ for å¾ªç¯
def sort_list(nums):
    n = len(nums)
    sorted_index = 0
    while sorted_index < n:
        for i in range(n - 1, sorted_index, -1):
            if nums[i] < nums[i - 1]:
                # swap(nums[i], nums[i - 1])
                tmp = nums[i]
                nums[i] = nums[i - 1]
                nums[i - 1] = tmp
        sorted_index += 1


# è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæ•°ç»„æœ‰åºæ—¶æå‰ç»ˆæ­¢ç®—æ³•
def sort(nums):
    n = len(nums)
    sorted_index = 0
    while sorted_index < n:
        # åŠ ä¸€ä¸ªå¸ƒå°”å˜é‡ï¼Œè®°å½•æ˜¯å¦è¿›è¡Œè¿‡äº¤æ¢æ“ä½œ
        swapped = False
        for i in range(n - 1, sorted_index, -1):
            if nums[i] < nums[i - 1]:
                # swap(nums[i], nums[i - 1])
                tmp = nums[i]
                nums[i] = nums[i - 1]
                nums[i - 1] = tmp
                swapped = True
        # å¦‚æœä¸€æ¬¡äº¤æ¢æ“ä½œéƒ½æ²¡æœ‰è¿›è¡Œï¼Œè¯´æ˜æ•°ç»„å·²ç»æœ‰åºï¼Œå¯ä»¥æå‰ç»ˆæ­¢ç®—æ³•
        if not swapped:
            break
        sorted_index += 1



#### æ’å…¥æ’åº ####
#### æ’å…¥æ’åº ####
#### æ’å…¥æ’åº ####
ç¨³å®šï¼Œå¦‚åŒæ‰“æ‰‘å…‹é¡ºç‰Œ

è¿›ä¸€æ­¥ä¼˜åŒ–ï¼š
    ä¸Šé¢çš„ç®—æ³•æ€è·¯æ˜¯ï¼šåœ¨ nums[sortedIndex..] ä¸­æ‰¾åˆ°æœ€å°å€¼ï¼Œç„¶åå°†å…¶æ’å…¥åˆ° nums[sortedIndex] çš„ä½ç½®ã€‚
    é‚£ä¹ˆåè¿‡æ¥æƒ³ï¼Œåœ¨ nums[0..sortedIndex-1] è¿™ä¸ªéƒ¨åˆ†æœ‰åºçš„æ•°ç»„ä¸­ï¼Œæ‰¾åˆ° nums[sortedIndex] åº”è¯¥æ’å…¥çš„ä½ç½®ï¼Œç„¶åè¿›è¡Œæ’å…¥
    æ—¢ç„¶ nums[0..sortedIndex-1] è¿™éƒ¨åˆ†æ˜¯å·²ç»æ’å¥½åºçš„ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥ç”¨äºŒåˆ†æœç´¢æ¥å¯»æ‰¾ nums[sortedIndex] åº”è¯¥æ’å…¥çš„ä½ç½®ã€‚
    å‹ç¼©åˆ°å¯¹æ•°çº§åˆ«
    ä½†æ˜¯ï¼
    å°±ç®—æˆ‘ç”¨äºŒåˆ†æœç´¢æ‰¾åˆ°äº† nums[sortedIndex] åº”è¯¥æ’å…¥çš„ä½ç½®ï¼Œæˆ‘è¿˜æ˜¯éœ€è¦æ¬ç§»å…ƒç´ è¿›è¡Œæ’å…¥ï¼Œè¿˜æ˜¯oï¼ˆnï¼‰

åˆå§‹æœ‰åºåº¦è¶Šé«˜ï¼Œæ•ˆç‡è¶Šé«˜ï¼š
    1. å¦‚æœè¾“å…¥æ•°ç»„å·²ç»æœ‰åºï¼Œæˆ–è€…ä»…æœ‰ä¸ªåˆ«å…ƒç´ é€†åºï¼Œé‚£ä¹ˆæ’å…¥æ’åºçš„å†…å±‚ for å¾ªç¯å‡ ä¹ä¸éœ€è¦æ‰§è¡Œå…ƒç´ äº¤æ¢ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ¥è¿‘ O(n)ã€‚
    2. å¦‚æœè¾“å…¥çš„æ•°ç»„æ˜¯å®Œå…¨é€†åºçš„ï¼Œé‚£ä¹ˆæ’å…¥æ’åºçš„æ•ˆç‡å°±ä¼šå¾ˆä½ï¼Œå†…å±‚ for å¾ªç¯æ¯æ¬¡éƒ½è¦å¯¹ nums[0..sortedIndex-1] çš„æ‰€æœ‰å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œ
        ç®—æ³•çš„æ€»æ—¶é—´å¤æ‚åº¦å°±æ¥è¿‘ O(n^2)


# å¯¹é€‰æ‹©æ’åºè¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå‘å·¦ä¾§æœ‰åºæ•°ç»„ä¸­æ’å…¥å…ƒç´ 
# è¿™ä¸ªç®—æ³•æœ‰å¦ä¸€ä¸ªåå­—ï¼Œå«åšæ’å…¥æ’åº
def sort(nums):
    n = len(nums)
    # ç»´æŠ¤ [0, sorted_index) æ˜¯æœ‰åºæ•°ç»„
    sorted_index = 0
    while sorted_index < n:
        # å°† nums[sorted_index] æ’å…¥åˆ°æœ‰åºæ•°ç»„ [0, sorted_index) ä¸­
        for i in range(sorted_index, 0, -1):
            if nums[i] < nums[i - 1]:
                # swap(nums[i], nums[i - 1])
                tmp = nums[i]
                nums[i] = nums[i - 1]
                nums[i - 1] = tmp
            else:
                break
        sorted_index += 1
        """ä½†ä»æ€»ä½“æ•ˆç‡ä¸Šï¼Œå†’æ³¡æ’åºä¾ç„¶æ¯”ä¸ä¸Šæ’å…¥æ’åºï¼Œå› ä¸ºå®ƒæ¯è½®éƒ½è¦æŠŠå…ƒç´ ä¸€ç‚¹ç‚¹äº¤æ¢å†’æ³¡ï¼Œè€Œæ’å…¥æ’åºç”¨çš„æ˜¯â€œæ•´ä½“æ¬ç§» + æ’å…¥â€ï¼ŒåŠ¨ä½œæ›´é«˜æ•ˆã€‚"""

å¯¹æ¯”:
    æ’å…¥æ’åºçš„ç»¼åˆæ€§èƒ½åº”è¯¥è¦é«˜äºå†’æ³¡æ’åºã€‚
        æ•°æ®æ¬ç§» vs ç›¸é‚»äº¤æ¢
            æ’å…¥æ’åºæ˜¯â€œæ•´ä½“æ¬ç§»ä¸€æ®µåŒºé—´ + æ’å…¥ä¸€ä¸ªå…ƒç´ â€ï¼Œä»£ä»·æ˜¯æ‰¹é‡æ¬ç§»ï¼Œä½†æ•´ä½“æ•ˆç‡è¾ƒé«˜ã€‚
            å†’æ³¡æ’åºæ˜¯â€œç›¸é‚»å…ƒç´ ä¸¤ä¸¤äº¤æ¢â€ï¼Œä»£ä»·æ˜¯å¤§é‡å±€éƒ¨äº¤æ¢ï¼Œæ¬¡æ•°æ›´å¤šã€‚
        æœ‰åºæ€§åˆ©ç”¨ç‡ä¸åŒ
            æ’å…¥æ’åºèƒ½åˆ©ç”¨â€œå‰ç¼€å·²ç»æœ‰åºâ€çš„æ€§è´¨ â†’ æ‰¾åˆ°æ’å…¥ç‚¹åå°±åœæ­¢ã€‚
            å†’æ³¡æ’åºæ¯è½®éƒ½å¿…é¡»éå†åˆ°åº•ï¼Œæ²¡æ³•åˆ©ç”¨å·²æœ‰æœ‰åºæ€§ã€‚
    æ’æ’ï¼š
        æ’å…¥æ’åºçš„å†…å±‚ for å¾ªç¯ï¼Œæœ‰åºåŒºé—´ â†’ å¯ä»¥æå‰ç»ˆæ­¢ï¼Œä¸å¿…æ‰«å®Œã€‚
        å¹³å‡æƒ…å†µä¸‹ï¼Œæ¯”è¾ƒå’Œç§»åŠ¨æ¬¡æ•° å°‘äº O(n)ï¼Œåªåœ¨æ•°ç»„æ¥è¿‘é€†åºæ—¶æ‰è¾¾åˆ°æœ€å O(n)ã€‚
        å¯¹å‡ ä¹æœ‰åºçš„æ•°ç»„ï¼Œéå¸¸é«˜æ•ˆï¼ˆæ¥è¿‘ O(n)ï¼‰ã€‚
    å†’æ³¡ï¼š
        å†…å±‚å¾ªç¯æ¯æ¬¡å¿…ç„¶èµ°å®Œæ•´ä¸ªåŒºé—´ï¼Œæ²¡æ³•åƒæ’å…¥æ’åºé‚£æ ·â€œæå‰ç»“æŸâ€ã€‚
        å³ä½¿æ•°ç»„å·²ç»å‡ ä¹æœ‰åºï¼Œä»ç„¶ä¼šåšå¾ˆå¤šä¸å¿…è¦çš„æ¯”è¾ƒã€‚



#### 4. å¸Œå°”æ’åº ####
#### 4. å¸Œå°”æ’åº ####
#### 4. å¸Œå°”æ’åº ####
åŸºäºæ’å…¥æ’åº çš„ç®€å•æ”¹è¿›ï¼Œé€šè¿‡é¢„å¤„ç†å¢åŠ æ•°ç»„çš„å±€éƒ¨æœ‰åºæ€§ï¼Œçªç ´äº†æ’å…¥æ’åºçš„ O(N^2)æ—¶é—´å¤æ‚åº¦ã€‚
ä¸ç¨³å®š


é—´éš”æœ‰åºï¼š
[1, 2, 4, 3, 5, 7, 8, 6, 10, 9, 12, 11]
 ^--------^--------^---------^
    ^--------^--------^---------^
       ^--------^--------^----------^

 1--------3--------8---------9
    2--------5--------6---------12
        4--------7--------10---------11

[1,3,8,9]ã€[2,5,6,12]ã€[4,7,10,11] è¿™ä¸‰ä¸ªæ•°ç»„éƒ½æ˜¯æœ‰åºçš„ï¼Œé—´éš”æ˜¯ 3ã€‚å½“ä¸€ä¸ªæ•°ç»„å®Œæˆæ’åºçš„æ—¶å€™ï¼Œå…¶å®å°±æ˜¯ 1 æœ‰åºæ•°ç»„ã€‚

å¯¹æ¯”ï¼šä¸ºä»€ä¹ˆâ€œåˆ†æ‰¹æ•´ç†â€èƒ½è®©æ’åºå˜å¿«
    æ’å…¥æ’åºï¼š
        ç›´æ¥æŠŠä¹±åºæ•°ç»„å˜æˆ 1 æœ‰åºæ•°ç»„ã€‚
        å¦‚æœæ•°ç»„æ¥è¿‘ é€†åºï¼Œæ¯ä¸ªæ–°å…ƒç´ éƒ½è¦å¾€å‰æŒªå¾ˆå¤šæ­¥ï¼Œç§»åŠ¨è·ç¦»æœ€è¿œå¯èƒ½æ˜¯ O(n)ã€‚
    å¸Œå°”æ’åºï¼š
        å…ˆæŠŠä¹±åºæ•°ç»„å˜æˆä¸€ä¸ª 16 æœ‰åºæ•°ç»„ï¼Œç„¶åå†å˜æˆ 8 æœ‰åºæ•°ç»„ï¼Œ4 æœ‰åºæ•°ç»„ï¼Œ2 æœ‰åºæ•°ç»„ï¼Œæœ€åå˜æˆ 1 æœ‰åºæ•°ç»„ï¼Œå®Œæˆæ’åºã€‚
        å¸Œå°”æ’åºå…ˆè®¾ä¸€ä¸ª gapï¼ŒæŠŠæ•°ç»„åˆ†æˆè‹¥å¹²å­åºåˆ—ã€‚
        åœ¨è¿™äº›å­åºåˆ—é‡Œåšæ’å…¥æ’åºã€‚
        è¿™æ ·èƒ½è®©å…ƒç´ â€œå¿«é€Ÿè·³è·ƒâ€åˆ°æ›´æ¥è¿‘ç›®æ ‡ä½ç½®ã€‚

        æ€»ç»“ï¼š
        å‡å°‘ç§»åŠ¨è·ç¦»ï¼š
            å…ƒç´ é€šè¿‡â€œå¤§æ­¥è·³è·ƒâ€æ›´å¿«æ¥è¿‘å®ƒçš„æœ€ç»ˆä½ç½®ã€‚
        æå‰æ¶ˆé™¤è¿œè·ç¦»é€†åºå¯¹ï¼š
            æ’å…¥æ’åºåªèƒ½ä¿®å¤ç›¸é‚»é€†åºå¯¹ã€‚
            å¸Œå°”æ’åºå…ˆä¿®å¤è¿œè·ç¦»é€†åºï¼Œå†ä¿®å¤çŸ­è·ç¦»é€†åºï¼Œæ•´ä½“å·¥ä½œé‡æ›´å°‘ã€‚

# æ­¥é•¿æ³•
# å¸Œå°”æ’åºï¼Œå¯¹ h æœ‰åºæ•°ç»„è¿›è¡Œæ’å…¥æ’åº
# é€æ¸ç¼©å° hï¼Œæœ€å h=1 æ—¶ï¼Œå®Œæˆæ•´ä¸ªæ•°ç»„çš„æ’åº
def sort(nums):
    n = len(nums)
    # æˆ‘ä»¬ä½¿ç”¨çš„ç”Ÿæˆå‡½æ•°æ˜¯ 2^(k-1)
    # å³ h = 1, 2, 4, 8, 16...
    h = 1
    while h < n // 2:
        h = 2 * h

    # æ”¹åŠ¨ä¸€ï¼ŒæŠŠæ’å…¥æ’åºçš„ä¸»è¦é€»è¾‘å¥—åœ¨ h çš„ while å¾ªç¯ä¸­
    while h >= 1:
        # æ”¹åŠ¨äºŒï¼Œsorted_index åˆå§‹åŒ–ä¸º hï¼Œè€Œä¸æ˜¯ 1
        sorted_index = h
        while sorted_index < n:
            # æ”¹åŠ¨ä¸‰ï¼ŒæŠŠæ¯”è¾ƒå’Œäº¤æ¢å…ƒç´ çš„æ­¥é•¿è®¾ç½®ä¸º hï¼Œè€Œä¸æ˜¯ç›¸é‚»å…ƒç´ 
            i = sorted_index
            while i >= h:
                if nums[i] < nums[i - h]:
                    # swap(nums[i], nums[i - h])
                    tmp = nums[i]
                    nums[i] = nums[i - h]
                    nums[i - h] = tmp
                else:
                    break
                i -= h
            sorted_index += 1

        # æŒ‰ç…§é€’å¢å‡½æ•°çš„è§„åˆ™ï¼Œç¼©å° h
        h //= 2

# æ˜¾å¼åˆ†ç»„æ³•
def shell_sort_group(nums):
    n = len(nums)
    h = n // 2  # åˆå§‹æ­¥é•¿

    while h >= 1:
        # æŠŠæ•°ç»„åˆ†æˆ h ä¸ªå­åºåˆ—ï¼šåˆ†åˆ«æ˜¯ nums[0::h], nums[1::h], ..., nums[h-1::h]
        for start in range(h):
            # å¯¹å­åºåˆ—åšæ’å…¥æ’åº
            for i in range(start + h, n, h):
                key = nums[i]
                j = i - h
                # æ’å…¥æ’åºçš„æ¬ç§»é€»è¾‘
                while j >= 0 and nums[j] > key:
                    nums[j + h] = nums[j]
                    j -= h
                nums[j + h] = key
        # ç¼©å° gap
        h //= 2
    return nums



#### 5 å¿«é€Ÿæ’åº ####
1ã€åœ¨ nums æ•°ç»„ä¸­ä»»æ„é€‰æ‹©ä¸€ä¸ªå…ƒç´ ä½œä¸ºåˆ‡åˆ†å…ƒç´  pivotï¼ˆä¸€èˆ¬é€‰æ‹©ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚

 [4, 1, 7, 2, 8, 5, 3, 6, 9]
  ^
pivot

2ã€å°†å°äº pivot çš„å…ƒç´ æ”¾åˆ° pivot çš„å·¦è¾¹ï¼Œå¤§äº pivot çš„å…ƒç´ æ”¾åˆ° pivot çš„å³è¾¹ã€‚

 [3, 1, 2, 4, 8, 5, 7, 6, 9]
           ^
         pivot
         
3ã€é€’å½’åœ°å¯¹ pivot å·¦è¾¹çš„æ•°ç»„å’Œå³è¾¹çš„æ•°ç»„é‡å¤ä¸Šè¿°æ­¥éª¤

 [3, 1, 2] [4] [8, 5, 7, 6, 9]
  ^         ^   ^
pivot1          pivot2

 [1, 2, 3] [4] [5, 7, 6, 8, 9]
        ^   ^            ^
    pivot1             pivot2




        [4, 1, 7, 2, 5, 3, 6]
         /                 \
    [2, 1, 3]    [4]     [7, 5, 6]
     /     \              /     \
  [1]  [2]  [3]        [5]  [6]  [7]

æ¯ä¸€å±‚çš„æ•°ç»„å…ƒç´ æ€»æ•°éƒ½å¤§è‡´æ˜¯æ•°ç»„é•¿åº¦ O(n)ã€‚


ç†æƒ³æƒ…å†µè¿™æ£µæ ‘æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Œå³æ ‘é«˜æ˜¯ O(logn)ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ 
O(nlogn)
ä¸éœ€è¦é¢å¤–çš„è¾…åŠ©ç©ºé—´ï¼Œæ˜¯åŸåœ°æ’åºç®—æ³•ã€‚
é€’å½’éå†äºŒå‰æ ‘æ—¶ï¼Œé€’å½’å‡½æ•°çš„å †æ ˆæ·±åº¦ä¸ºæ ‘çš„é«˜åº¦ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯ 
O(logn)

def sort(nums: List[int], lo: int, hi: int):
    if lo >= hi:
        return
    # ****** å‰åºä½ç½® ******
    # å¯¹ nums[lo..hi] è¿›è¡Œåˆ‡åˆ†ï¼Œå°† nums[p] æ’å¥½åº
    # ä½¿å¾— nums[lo..p-1] <= nums[p] < nums[p+1..hi]
    p = partition(nums, lo, hi)

    # å»å·¦å³å­æ•°ç»„è¿›è¡Œåˆ‡åˆ†
    sort(nums, lo, p - 1)
    sort(nums, p + 1, hi)


def partition(nums: List[int], lo: int, hi: int) -> int:
    pivot = nums[hi]  # é€‰æ‹©æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†
    i = lo  # i æŒ‡å‘å°äºç­‰äº pivot çš„åŒºåŸŸçš„è¾¹ç•Œ

    for j in range(lo, hi):
        if nums[j] <= pivot:
            nums[i], nums[j] = nums[j], nums[i]
            i += 1
    # æŠŠ pivot æ”¾åˆ°æœ€ç»ˆä½ç½®
    nums[i], nums[hi] = nums[hi], nums[i]
    return i


Lomutoç‰ˆæœ¬ï¼š
æ¯æ¬¡å¾ªç¯åªåŠ¨ä¸€è¾¹çš„æŒ‡é’ˆã€‚
ç¼ºç‚¹ï¼šå½“æ•°æ®å¾ˆå¤šé‡å¤å€¼æ—¶ï¼Œå·¦è¾¹ä¼šåå¤§ï¼Œå¯èƒ½å¯¼è‡´é€€åŒ–ã€‚

ğŸ”‘ æ ¸å¿ƒå˜é‡
    jï¼šæ‰«ææŒ‡é’ˆï¼Œä»å·¦å¾€å³ä¸€ä¸ªä¸ªæ£€æŸ¥å…ƒç´ ã€‚
    iï¼šè¾¹ç•ŒæŒ‡é’ˆï¼ŒæŒ‡å‘ã€Œä¸‹ä¸€ä¸ª â‰¤ pivot å…ƒç´ åº”è¯¥æ”¾çš„ä½ç½®ã€ã€‚
    
    å·¦è¾¹ [lo..i-1]ï¼šéƒ½ â‰¤ pivot
    ä¸­é—´ iï¼šæœ€åæ”¾ pivot
    å³è¾¹ [i+1..hi]ï¼šéƒ½ > pivot

âœ… æ€»ç»“
    j ä¸€ç›´å¾€å³æ‰«ï¼Œçœ‹æ¯ä¸ªæ•°æ˜¯å¦ â‰¤ pivotã€‚
    å¦‚æœ nums[j] <= pivotï¼Œå°±æŠŠå®ƒæ”¾åˆ°å·¦è¾¹ï¼ˆå³æ¢åˆ° i ä½ç½®ï¼‰ï¼Œç„¶å i++ã€‚
    æœ€åæŠŠ pivot æ”¾åˆ° iï¼Œå°±å®Œæˆåˆ†åŒºã€‚

# hoareæ–¹æ³•
def quicksort(nums, lo, hi):
    if lo < hi:
        # ç”¨ Hoare æ–¹æ³•åˆ†åŒº
        p = partition_hoare(nums, lo, hi)
        # æ³¨æ„ï¼šé€’å½’çš„æ—¶å€™è¦ç”¨ [lo..p] å’Œ [p+1..hi]
        quicksort(nums, lo, p)
        quicksort(nums, p + 1, hi)
def partition(nums: List[int], lo: int, hi: int) -> int:
    # é€‰æ‹©ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸º pivot
    pivot = nums[lo]
    i, j = lo + 1, hi

    while i <= j:
        # i å‘å³èµ°ï¼Œç›´åˆ°é‡åˆ°ä¸€ä¸ª > pivot çš„æ•°
        while i < hi and nums[i] <= pivot:
            i += 1
        # j å‘å·¦èµ°ï¼Œç›´åˆ°é‡åˆ°ä¸€ä¸ª <= pivot çš„æ•°
        while j > lo and nums[j] > pivot:
            j -= 1
        # ä¸¤è¾¹æŒ‡é’ˆç›¸é‡ï¼Œé€€å‡º
        if i >= j:
            break
        # äº¤æ¢ä¸åœ¨ä½ç½®çš„å…ƒç´ 
        nums[i], nums[j] = nums[j], nums[i]

    # æŠŠ pivot æ”¾åˆ°æ­£ç¡®ä½ç½®
    nums[lo], nums[j] = nums[j], nums[lo]
    return j


def partition_hoare(nums, lo, hi):
    pivot = nums[lo]
    i, j = lo - 1, hi + 1
    while True:
        i += 1
        while nums[i] < pivot:
            i += 1
        j -= 1
        while nums[j] > pivot:
            j -= 1
        if i >= j:
            return j
        nums[i], nums[j] = nums[j], nums[i]


#### 6.å½’å¹¶æ’åº ####
#### 6.å½’å¹¶æ’åº ####
#### 6.å½’å¹¶æ’åº ####
æŠŠæ•°ç»„åˆ‡æˆä¸¤åŠï¼Œå…ˆæŠŠè¿™ä¸¤åŠå­æ•°ç»„åˆ†åˆ«æ’å¥½åºï¼Œç„¶åå†åˆå¹¶è¿™ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œæ•´ä¸ªæ•°ç»„å°±æ’å¥½åºäº†ã€‚
å½’å¹¶æ’åºæ˜¯ç¨³å®šæ’åºã€‚
å½’å¹¶æ’åºçš„ merge å‡½æ•°éœ€è¦ä¸€ä¸ªé¢å¤–çš„æ•°ç»„æ¥è¾…åŠ©è¿›è¡Œæœ‰åºæ•°ç»„çš„åˆå¹¶æ“ä½œï¼Œæ¶ˆè€— 
O(n) çš„ç©ºé—´ã€‚

# å®šä¹‰ï¼šæ’åº nums[lo..hi]
def sort(nums: List[int], lo: int, hi: int) -> None:
    if lo == hi:
        return
    mid = (lo + hi) // 2
    # åˆ©ç”¨å®šä¹‰ï¼Œæ’åº nums[lo..mid]
    sort(nums, lo, mid)
    # åˆ©ç”¨å®šä¹‰ï¼Œæ’åº nums[mid+1..hi]
    sort(nums, mid + 1, hi)

    # ****** ååºä½ç½® ******
    # æ­¤æ—¶ä¸¤éƒ¨åˆ†å­æ•°ç»„å·²ç»è¢«æ’å¥½åº
    # åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œä½¿ nums[lo..hi] æœ‰åº
    merge(nums, lo, mid, hi)

def merge(nums: List[int], lo: int, mid: int, hi: int) -> None:
    # åˆ›å»ºä¸´æ—¶æ•°ç»„
    temp = []
    i, j = lo, mid + 1

    # åˆå¹¶ä¸¤ä¸ªæœ‰åºå­æ•°ç»„
    while i <= mid and j <= hi:
        if nums[i] <= nums[j]:
            temp.append(nums[i])
            i += 1
        else:
            temp.append(nums[j])
            j += 1

    # æŠŠå‰©ä¸‹çš„å…ƒç´ è¡¥ä¸Š
    while i <= mid:
        temp.append(nums[i])
        i += 1
    while j <= hi:
        temp.append(nums[j])
        j += 1

    # å›å†™åˆ°åŸæ•°ç»„
    nums[lo:hi + 1] = temp


# æµ‹è¯•
nums = [5, 2, 3, 1, 4]
sort(nums, 0, len(nums) - 1)
print(nums)  # [1, 2, 3, 4, 5]


 
#### 7 äºŒå‰å †ç»“æ„çš„è¿ç”¨ï¼šå †æ’åº ####
å †æ’åºï¼ˆä»¥å‡åºæ’åºä¸ºä¾‹ï¼Œç”¨å¤§é¡¶å †ï¼‰
å»ºå †
    ç›®æ ‡ï¼šæŠŠæ— åºæ•°ç»„å˜æˆä¸€ä¸ªå¤§é¡¶å †ï¼ˆæœ€å¤§å€¼åœ¨å †é¡¶ï¼‰ã€‚
    æ–¹æ³•æœ‰ä¸¤ç§ï¼š
        swim ä¸Šæµ®å»ºå †ï¼šä»å¤´åˆ°å°¾æ‰«ææ•°ç»„ï¼Œæ¯æ’å…¥ä¸€ä¸ªæ–°å…ƒç´ ï¼Œå°±å‘ä¸Šâ€œå†’æ³¡â€è°ƒæ•´ä½ç½®ï¼Œä¿æŒå †åºã€‚å¤æ‚åº¦ O(n log n)ã€‚
        sink ä¸‹æ²‰å»ºå †ï¼ˆæ¨èï¼‰ï¼šä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œé€ä¸ªå‘ä¸‹è°ƒæ•´ã€‚å¤æ‚åº¦ O(n)ã€‚
æ’åº
    ç°åœ¨å †é¡¶æ˜¯æ•´ä¸ªæ•°ç»„æœ€å¤§å€¼ï¼ŒæŠŠå®ƒå’Œæœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ã€‚
    æŠŠå †çš„æœ‰æ•ˆèŒƒå›´ç¼©å°ä¸€æ ¼ï¼ˆç›¸å½“äºâ€œå»æ‰æœ€åä¸€ä¸ªå…ƒç´ â€ï¼Œå®ƒå·²ç»æ˜¯æœ€å¤§å€¼ï¼Œæ”¾åœ¨æ­£ç¡®ä½ç½®äº†ï¼‰ã€‚
    å¯¹æ–°çš„å †é¡¶è¿›è¡Œ sink ä¸‹æ²‰ï¼Œè®©å †é‡æ–°æ»¡è¶³å¤§é¡¶å †æ€§è´¨ã€‚
    é‡å¤ä¸Šé¢æ­¥éª¤ï¼Œç›´åˆ°å †åªå‰©ä¸€ä¸ªå…ƒç´ ã€‚

å»ºå † â†’ ä¸æ–­äº¤æ¢å †é¡¶ä¸æœ«å°¾ â†’ ç¼©å°å †èŒƒå›´ â†’ ä¸‹æ²‰å †é¡¶ â†’ ç›´åˆ°æ’å®Œ
def min_heap_swim(heap, node):
    # å°é¡¶å †çš„ä¸Šæµ®æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯æ ‘é«˜ O(logN)
    while node > 0 and heap[parent(node)] > heap[node]:
        swap(heap, parent(node), node)
        node = parent(node)


def min_heap_sink(heap, node, size):
    # å°é¡¶å †çš„ä¸‹æ²‰æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯æ ‘é«˜ O(logN)
    while left(node) < size or right(node) < size:
        # æ¯”è¾ƒè‡ªå·±å’Œå·¦å³å­èŠ‚ç‚¹ï¼Œçœ‹çœ‹è°æœ€å°
        min_index = node
        if left(node) < size and heap[left(node)] < heap[min_index]:
            min_index = left(node)
        if right(node) < size and heap[right(node)] < heap[min_index]:
            min_index = right(node)
        if min_index == node:
            break
        # å¦‚æœå·¦å³å­èŠ‚ç‚¹ä¸­æœ‰æ¯”è‡ªå·±å°çš„ï¼Œå°±äº¤æ¢
        swap(heap, node, min_index)
        node = min_index


def max_heap_swim(heap, node):
    # å¤§é¡¶å †çš„ä¸Šæµ®æ“ä½œ
    while node > 0 and heap[parent(node)] < heap[node]:
        swap(heap, parent(node), node)
        node = parent(node)


def max_heap_sink(heap, node, size):
    # å¤§é¡¶å †çš„ä¸‹æ²‰æ“ä½œ
    while left(node) < size or right(node) < size:
        # å°é¡¶å †å’Œå¤§é¡¶å †çš„å”¯ä¸€åŒºåˆ«å°±åœ¨è¿™é‡Œï¼Œæ¯”è¾ƒé€»è¾‘ç›¸å
        # æ¯”è¾ƒè‡ªå·±å’Œå·¦å³å­èŠ‚ç‚¹ï¼Œçœ‹çœ‹è°æœ€å¤§
        max_index = node
        if left(node) < size and heap[left(node)] > heap[max_index]:
            max_index = left(node)
        if right(node) < size and heap[right(node)] > heap[max_index]:
            max_index = right(node)
        if max_index == node:
            break
        swap(heap, node, max_index)
        node = max_index


def parent(node):
    # çˆ¶èŠ‚ç‚¹çš„ç´¢å¼•
    return (node - 1) // 2


def left(node):
    # å·¦å­èŠ‚ç‚¹çš„ç´¢å¼•
    return node * 2 + 1


def right(node):
    # å³å­èŠ‚ç‚¹çš„ç´¢å¼•
    return node * 2 + 2


def swap(heap, i, j):
    # äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®
    heap[i], heap[j] = heap[j], heap[i]


def sort(nums):
    # ç¬¬ä¸€æ­¥ï¼ŒåŸåœ°å»ºå †ï¼Œæ³¨æ„è¿™é‡Œåˆ›å»ºçš„æ˜¯å¤§é¡¶å †
    # åªè¦ä»å·¦å¾€å³å¯¹æ¯ä¸ªå…ƒç´ è°ƒç”¨ swim æ–¹æ³•ï¼Œå°±å¯ä»¥åŸåœ°å»ºå †
    for i in range(len(nums)):
        max_heap_swim(nums, i)

    # ç¬¬äºŒæ­¥ï¼Œæ’åº
    # ç°åœ¨æ•´ä¸ªæ•°ç»„å·²ç»æ˜¯ä¸€ä¸ªå¤§é¡¶äº†ï¼Œç›´æ¥æ¨¡æ‹Ÿåˆ é™¤å †é¡¶å…ƒç´ çš„è¿‡ç¨‹å³å¯
    heap_size = len(nums)
    while heap_size > 0:
        # ä»å †é¡¶åˆ é™¤å…ƒç´ ï¼Œæ”¾åˆ°å †çš„åé¢
        swap(nums, 0, heap_size - 1)
        heap_size -= 1
        # æ¢å¤å †çš„æ€§è´¨
        max_heap_sink(nums, 0, heap_size)
        # ç°åœ¨ nums[0..heap_size) æ˜¯ä¸€ä¸ªå¤§é¡¶å †ï¼Œnums[heap_size..) æ˜¯æœ‰åºå…ƒç´ 

"""ä¼˜åŒ–
æ¯ä¸ªç‚¹ç”±ä¸Šè‡³ä¸‹swim
å˜æˆ
æ¯ä¸ªéå¶å­èŠ‚ç‚¹ ç”±ä¸‹è‡³ä¸Š sink
å› ä¸º
sinkå¥½çš„å·¦å³å­å †ï¼Œåªè¦æŠŠçˆ¶èŠ‚ç‚¹sinkï¼Œå°±å¯ä»¥ä¿è¯æ•´ä¸ªéƒ½æ˜¯å †


å‰åº â†’ swimï¼šå…ˆæ ¹åå­
æ’å…¥æ—¶ä½ æ˜¯ä»æ ¹åˆ°å¶â€œå¼€è·¯å¾„â€ï¼Œæ¯ä¸ªæ–°ç‚¹ä¸€è¾¹èµ°ä¸€è¾¹è°ƒæ•´ã€‚

ååº â†’ sinkï¼šå…ˆå­åæ ¹
å»ºå †æ—¶ä½ å…ˆä¿è¯æ¯æ£µå­æ ‘æ˜¯å †ï¼Œå†è°ƒæ•´å®ƒä»¬çš„æ ¹èŠ‚ç‚¹ã€‚

æ¢å¥è¯è¯´ï¼š
swim æ˜¯ è‡ªé¡¶å‘ä¸‹ä¿®æ­£è·¯å¾„ï¼Œsink æ˜¯ è‡ªåº•å‘ä¸Šæ„å»ºç»“æ„ã€‚

4. ä»€ä¹ˆæ—¶å€™ç”¨å“ªç§ï¼Ÿ
æ•°æ®æ˜¯æµå¼åˆ°æ¥çš„ â†’ swimï¼ˆä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰
æ•°æ®ä¸€æ¬¡æ€§ç»™å…¨ â†’ sinkï¼ˆå †æ’åºã€heapifyï¼‰  sink æ˜¯ O(n) æ•°å­¦æ¨å¯¼çš„ä¸ç”¨ç®¡
"""

def sort(nums):
    # ç¬¬ä¸€æ­¥ï¼ŒåŸåœ°å»ºå †ï¼Œæ³¨æ„è¿™é‡Œåˆ›å»ºçš„æ˜¯å¤§é¡¶å †
    # ä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œä¾æ¬¡ä¸‹æ²‰ï¼Œåˆå¹¶äºŒå‰å †
    n = len(nums)
    for i in range(n // 2 - 1, -1, -1):
        max_heap_sink(nums, i, n)

    # åˆå¹¶å®Œæˆï¼Œç°åœ¨æ•´ä¸ªæ•°ç»„å·²ç»æ˜¯ä¸€ä¸ªå¤§é¡¶å †

    # ç¬¬äºŒæ­¥ï¼Œæ’åºï¼Œå’Œåˆšæ‰çš„ä»£ç ä¸€æ ·
    heap_size = n
    while heap_size > 0:
        # ä»å †é¡¶åˆ é™¤å…ƒç´ ï¼Œæ”¾åˆ°å †çš„åé¢
        swap(nums, 0, heap_size - 1)
        heap_size -= 1
        # æ¢å¤å †çš„æ€§è´¨
        max_heap_sink(nums, 0, heap_size)
        # ç°åœ¨ nums[0..heap_size) æ˜¯ä¸€ä¸ªå¤§é¡¶å †ï¼Œnums[heap_size..) æ˜¯æœ‰åºå…ƒç´ 
"""
# ç›´æ¥åˆ©ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—å¯¹æ•°ç»„ä»å°åˆ°å¤§æ’åº
def sort(nums):
    # åˆ›å»ºä¸€ä¸ªä»å°åˆ°å¤§æ’åºå…ƒç´ çš„å°é¡¶å †
    pq = SimpleMinPQ(len(nums))
    
    # å…ˆæŠŠæ‰€æœ‰å…ƒç´ æ’å…¥åˆ°ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­
    for num in nums:
        # push æ“ä½œä¼šè‡ªåŠ¨æ„å»ºäºŒå‰å †ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(logN)
        pq.push(num)
    
    # å†æŠŠæ‰€æœ‰å…ƒç´ å–å‡ºæ¥ï¼Œå°±æ˜¯ä»å°åˆ°å¤§æ’åºçš„ç»“æœ
    for i in range(len(nums)):
        # pop æ“ä½œä»å †é¡¶å¼¹å‡ºäºŒå‰å †å †ä¸­æœ€å°çš„å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(logN)
        nums[i] = pq.pop() 

æ³¨æ„ï¼š
    pushå’Œpopå·²ç»åŒ…å«ä¸Šæµ®äº¤æ¢ç­‰æ“ä½œ
    # å¢ï¼Œå‘å †ä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ O(logN)
    def push(self, x):
        # æŠŠæ–°å…ƒç´ è¿½åŠ åˆ°æœ€å
        self.heap[self.size] = x
        # ç„¶åä¸Šæµ®åˆ°æ­£ç¡®ä½ç½®
        self.swim(self.size)
        self.size += 1

    # åˆ ï¼Œåˆ é™¤å †é¡¶å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ O(logN)
    def pop(self):
        res = self.heap[0]
        # æŠŠå †åº•å…ƒç´ æ”¾åˆ°å †é¡¶
        self.heap[0] = self.heap[self.size - 1]
        self.size -= 1
        # ç„¶åä¸‹æ²‰åˆ°æ­£ç¡®ä½ç½®
        self.sink(0)
        return res       
"""

å…ˆä¿è¯å­æ ‘æ˜¯å †ï¼Œå† sink æ ¹èŠ‚ç‚¹ â†’ æ•´æ£µæ ‘å †åºæˆç«‹ã€‚



## è®¡æ•°æ’åº
def counting_sort_with_negatives(nums):
    if not nums:
        return nums

    min_val = min(nums)
    max_val = max(nums)

    # åç§»é‡ï¼šå°†æ‰€æœ‰å€¼æ˜ å°„ä¸ºéè´Ÿæ•´æ•°
    offset = -min_val
    count_size = max_val - min_val + 1

    # 1. åˆ›å»ºå¹¶å¡«å……è®¡æ•°æ•°ç»„
    count = [0] * count_size
    for num in nums:
        count[num + offset] += 1

    # 2. æ„å»ºå‰ç¼€å’Œï¼Œè¡¨ç¤º <= i çš„å…ƒç´ æœ‰å¤šå°‘ä¸ª
    for i in range(1, count_size):
        count[i] += count[i - 1]

    # 3. æ„å»ºè¾“å‡ºæ•°ç»„ï¼ˆå€’åºä¿è¯ç¨³å®šï¼‰
    output = [0] * len(nums)
    for num in reversed(nums):
    #for i in range(len(nums) - 1, -1, -1):
        idx = num + offset
        output[count[idx]] = num
        count[idx] -= 1
    return output



def counting_sort_numeric(nums):
    if not nums:
        return nums
    mn, mx = min(nums), max(nums)
    off = -mn
    count = [0] * (mx - mn + 1)

    for x in nums:
        count[x + off] += 1

    # å‰ç¼€å’Œ
    for i in range(1, len(count)):
        count[i] += count[i - 1]

    out = [0] * len(nums)
    for x in reversed(nums):           # å€’åºä¿è¯ç¨³å®š
        idx = x + off
        count[idx] -= 1
        out[count[idx]] = x
    return out




# æ¡¶æ’åº
"""
æ¡¶æ’åºï¼ˆBucket Sortï¼‰ç¬”è®°æ€»ç»“

ğŸ§± ä¸€ã€ç®—æ³•åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š

1. åˆ†æ¡¶ï¼ˆåˆ†å‘é˜¶æ®µï¼‰ O(n)
   - å°†è¾“å…¥æ•°æ®æ ¹æ®æ˜ å°„å‡½æ•°åˆ†å‘åˆ° k ä¸ªæ¡¶ä¸­
   - å¸¸ç”¨æ˜ å°„ï¼š index = int(x * k)ï¼ˆé€‚ç”¨äº [0, 1) åŒºé—´çš„æµ®ç‚¹æ•°ï¼‰
    é”™è¯¯ï¼šint bucketIndex = nums[i] % k;å› ä¸ºåˆå¹¶æœ‰åºæ¡¶çš„æ—¶é—´å¤æ‚åº¦å°±ä¼šè¶…è¿‡ O(n)ã€‚


2. æ¡¶å†…æ’åº        O(nÂ²/k)ï¼ˆå–å†³äºæ¡¶å†…æ’åºæ–¹å¼ï¼‰
   - æ¯ä¸ªæ¡¶å†…éƒ¨ç”¨æ’å…¥æ’åº / å¿«æ’ / Timsort ç­‰æ–¹æ³•è¿›è¡Œæ’åº
   - å¦‚æœå…ƒç´ åˆ†å¸ƒå‡åŒ€ï¼Œæ¯ä¸ªæ¡¶çº¦æœ‰ n/k ä¸ªå…ƒç´ 
   - æ’å…¥æ’åºä¸‹æ¯ä¸ªæ¡¶æ’åºæ—¶é—´ä¸º O((n/k)^2)ï¼Œå…± k ä¸ªæ¡¶ï¼Œæ€»ä½“ä¸º O(nÂ²/k)
   - å¿«æ’ä¸‹æ€»æ¡¶å†…æ’åºå¤æ‚åº¦ä¸º O(n log(n/k))

3. æ‹¼æ¥æ¡¶ï¼ˆåˆå¹¶é˜¶æ®µï¼‰ O(n)
    æ¡¶ 0: [0.0, 0.2)
    æ¡¶ 1: [0.2, 0.4)
    æ¡¶ 2: [0.4, 0.6)
    æ¡¶ 3: [0.6, 0.8)
    æ¡¶ 4: [0.8, 1.0)
   - é¡ºåºéå†æ¯ä¸ªæ¡¶ï¼Œå°†æ¡¶ä¸­å·²æ’å¥½åºçš„å…ƒç´ æŒ‰é¡ºåºå¤åˆ¶æˆ–æ‹¼æ¥åˆ°ç»“æœæ•°ç»„
   - ç”±äºæ¡¶ç¼–å·å¤©ç„¶æœ‰åºï¼Œç›´æ¥æ‹¼æ¥å³å¯ï¼Œæ— éœ€æ¯”è¾ƒæˆ–å½’å¹¶

ğŸ§® äºŒã€æ—¶é—´å¤æ‚åº¦æ±‡æ€»ï¼š

è®¾ï¼š
- n ä¸ºå…ƒç´ æ€»æ•°
- k ä¸ºæ¡¶çš„æ•°é‡
- m = n/k ä¸ºæ¯ä¸ªæ¡¶çš„å¹³å‡å…ƒç´ ä¸ªæ•°

åˆ™æ€»å¤æ‚åº¦ä¸ºï¼š

ğŸ”¸ æœ€åæƒ…å†µï¼ˆæ‰€æœ‰å…ƒç´ è½å…¥ä¸€ä¸ªæ¡¶ï¼‰ï¼šO(nÂ²)
ğŸ”¸ æœ€ä½³æƒ…å†µï¼ˆå‡åŒ€åˆ†å¸ƒ + æ¯æ¡¶ â‰¤ å¸¸æ•°ä¸ªå…ƒç´ ï¼‰ï¼šO(n)
ğŸ”¸ ä¸€èˆ¬æƒ…å†µï¼š
    â€¢ æ’å…¥æ’åºï¼š O(nÂ² / k + n)
    â€¢ å¿«é€Ÿæ’åºï¼š O(n log(n/k) + n)

âš ï¸ æ³¨æ„ï¼š
- åˆ†æ¡¶ä¸æ‹¼æ¥éƒ½æ˜¯çº¿æ€§å¤æ‚åº¦ O(n)ï¼Œä¸æ˜¯ä¸»è¦ç“¶é¢ˆ
- æ¡¶å†…æ’åºæ–¹å¼ä¸å…ƒç´ åˆ†å¸ƒå†³å®šäº†æ•´ä½“æ€§èƒ½
- æ¡¶æ’åºé€‚ç”¨äºè¾“å…¥æ•°æ®åˆ†å¸ƒè¾ƒå‡åŒ€ã€å€¼åŸŸå·²çŸ¥çš„åœºæ™¯ï¼ˆå¦‚ [0, 1) æµ®ç‚¹æ•°ï¼‰

"""

### 1. æ’æ’
def insertion_sort(arr):
    for i in range(1, len(arr)):
        key = arr[i]
        j = i - 1
        while j >= 0 and arr[j] > key:
            arr[j + 1] = arr[j]
            j -= 1
        arr[j + 1] = key


def bucket_sort(nums, bucket_count=10):
    if not nums:
        return []
    min_val = min(nums)
    max_val = max(nums)
    Îµ = 1e-9  # é¿å…é™¤ä»¥ 0
    
    buckets = [[] for _ in range(bucket_count)]
    for num in nums:
        index = int((num - min_val) / (max_val - min_val + Îµ) * bucket_count) # å½’ä¸€åŒ–
        index = min(index, bucket_count - 1)  # é˜²æ­¢è¶Šç•Œ
        buckets[index].append(num)

    for bucket in buckets:
        insertion_sort(bucket)

    # 4ï¸âƒ£ æ‹¼æ¥é˜¶æ®µï¼šæŒ‰æ¡¶ç¼–å·é¡ºåºåˆå¹¶æ‰€æœ‰æ¡¶
    sorted_nums = []
    for bucket in buckets:
        sorted_nums.extend(bucket)

    return sorted_nums


#



def is_sorted(arr):
    """åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦å·²ç»å‡åº"""
    return all(arr[i] <= arr[i + 1] for i in range(len(arr) - 1))


def bucket_sort(nums, bucket_count=10):
    """
    é€’å½’ç‰ˆæ¡¶æ’åºï¼šé€‚ç”¨äºä»»æ„å®æ•°èŒƒå›´ï¼Œæ¡¶å†…ç»§ç»­ä½¿ç”¨æ¡¶æ’åºï¼ˆé€’å½’ï¼‰ï¼Œç›´åˆ°æœ‰åºæˆ–è§„æ¨¡å¾ˆå°

    ğŸ§  ä¸¾ä¾‹è¯´æ˜ base case #2 çš„å¿…è¦æ€§ï¼š
    å‡è®¾ä½ æœ‰ä¸ªæ•°ç»„ï¼š
    nums = [0.1, 0.1, 0.1, 0.1]
    è¿™äº›æ•°å…¨éƒ½è½åˆ°ä¸€ä¸ªæ¡¶é‡Œ
    å†é€’å½’è¿™ä¸ªæ¡¶æ—¶ï¼Œmin == maxï¼Œä¼šå¯¼è‡´å½’ä¸€åŒ–æ—¶æ‰€æœ‰å€¼ä»æ˜ å°„åˆ° index 0
    å¦‚æœä½ æ²¡æœ‰ is_sorted checkï¼Œä½ å°±ä¼šæ— é™é€’å½’åœ°å¯¹ [0.1, 0.1, 0.1, 0.1] è°ƒç”¨è‡ªå·±ï¼â˜ ï¸
    æœ‰äº† is_sortedï¼Œç›´æ¥è§¦å‘ base caseï¼Œé€’å½’è¿”å› âœ…

    Base 3: è¿‘ä¼¼æ¯”è¾ƒï¼Œé¿å…[1,1+1e-9]è¿™ç§å¡æ— é™å¾ªç¯
        >>> a = 0.1 + 0.2
        >>> b = 0.3
        >>> print(a == b)
        False
    å› ä¸º
        0.1 + 0.2 = 0.30000000000000004
              0.3 = 0.3000000000000000
    Python å®˜æ–¹æ¨èæ€ä¹ˆæ¯”è¾ƒæµ®ç‚¹æ•°ï¼Ÿ
        Python æä¾›äº†ä¸€ä¸ªå®˜æ–¹å‡½æ•°ï¼šmath.isclose()
        math.isclose(a, b, rel_tol=1e-9, abs_tol=0.0)
    """
    # base 1
    if len(nums) <= 1:
        return nums[:]
    # base 2
    if is_sorted(nums):
        return nums[:]

    min_val = min(nums)
    max_val = max(nums)
    Îµ = 1e-9

    # base 3
    if abs(max_val - min_val) < Îµ:
        return nums[:]

    # åˆå§‹åŒ–æ¡¶
    buckets = [[] for _ in range(bucket_count)]

    # åˆ†å‘å…ƒç´ 
    for num in nums:
        index = int((num - min_val) / (max_val - min_val + Îµ) * bucket_count)
        index = min(index, bucket_count - 1)
        buckets[index].append(num)

    # é€’å½’å¯¹æ¯ä¸ªæ¡¶æ’åº
    sorted_nums = []
    for bucket in buckets:
        if len(bucket) <= 1:
            sorted_nums.extend(bucket)
        else:
            # é€’å½’è°ƒç”¨è‡ªå·±
            sorted_bucket = bucket_sort(bucket, bucket_count)
            sorted_nums.extend(sorted_bucket)

    return sorted_nums


"""
ç¨³å®šæ€§ï¼š
    æ’åºç¨³å®šæ€§ä¸»è¦å–å†³äºå¯¹æ¯ä¸ªæ¡¶çš„æ’åºç®—æ³•ã€‚
    1. æ’å…¥æ’åºï¼Œç¨³å®š
    2. é€‰æ‹©æ’åºï¼Œä¸ç¨³å®š
    3. éå†æ–¹æ³•ï¼Œç¨³å®š


âœ… ä¸€ã€ç©ºé—´å¤æ‚åº¦ = O(n + k)
ğŸ“¦ æœ‰ä¸¤ä¸ªæ¥æºï¼š

n æ˜¯å…ƒç´ æ€»æ•°

ä½ è¦æŠŠæ‰€æœ‰å…ƒç´ åˆ†å‘è¿›æ¡¶ â‡’ æ€»å…± n ä¸ªæ•°è¦è¢«å¤åˆ¶ï¼ˆè™½ç„¶æœ‰å¯èƒ½æ˜¯å¼•ç”¨ï¼‰

k æ˜¯æ¡¶çš„æ•°é‡

å³ä½¿æœ‰çš„æ¡¶æ˜¯ç©ºçš„ï¼Œä½ ä»ç„¶å¼€äº† k ä¸ªæ¡¶ï¼ˆé€šå¸¸æ˜¯ k â‰ˆ âˆšn æˆ–å›ºå®šå€¼ï¼‰


âœ… äºŒã€å‡æ‘Šæ—¶é—´å¤æ‚åº¦ = O(n + k)

è¿™æ˜¯æ¡¶æ’åºæœ€â€œç†æƒ³æƒ…å†µâ€çš„æ—¶é—´å¤æ‚åº¦ â€”â€” æ‰€è°“çš„â€œå‡æ‘Šåˆ†æâ€ã€‚
ğŸ§  ç†æƒ³å‰æï¼š

å…ƒç´ åˆ†å¸ƒ å‡åŒ€éšæœºï¼Œæ¯ä¸ªæ¡¶é‡Œå¤§è‡´åªæœ‰å¸¸æ•°ä¸ªå…ƒç´ 
å¹¶ä¸”æ¡¶å†…æ’åºç®—æ³•æ˜¯ O(mÂ²) çš„ï¼ˆæ¯”å¦‚æ’æ’ï¼‰ï¼Œä½† m å¾ˆå°

ğŸ“ˆ ä¸‰ä¸ªé˜¶æ®µæ—¶é—´åˆ†æï¼š
| é˜¶æ®µ   | æ“ä½œ             | æ—¶é—´å¤æ‚åº¦                                 |
| ---- | -------------- | ------------------------------------- |
| åˆ†å‘   | æŠŠæ¯ä¸ªå…ƒç´ æ”¾è¿›å¯¹åº”æ¡¶     | O(n)                                  |
| æ¡¶å†…æ’åº | k ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶ m ä¸ªå…ƒç´  | k Ã— O(mÂ²) = O(nÂ²/k) â‡’ å½“ m â‰ˆ å¸¸æ•° â‡’ O(n) |
| æ‹¼æ¥   | éå†æ‰€æœ‰æ¡¶æŠŠå…ƒç´ åˆå¹¶     | O(n)                                  |


é€‰å¯¹ k â‡’ ä¼˜åŒ–å¤æ‚åº¦ï¼š
å¦‚æœä½ è®¾å®š k â‰ˆ nï¼ˆæ¯ä¸ªæ¡¶ 1 ä¸ªå…ƒç´ ï¼‰ï¼š
O(nÂ² / k) = O(nÂ² / n) = O(n)
æ‰€ä»¥åªè¦ åˆ†å¸ƒåˆç† + æ¡¶è¶³å¤Ÿå¤šï¼Œå°±å¯ä»¥è·å¾—ï¼š
âœ… å‡æ‘Šæ—¶é—´å¤æ‚åº¦ï¼šO(n + k)ï¼ˆå¸¸å¸¸ç®€å†™ä¸º O(n)ï¼‰
"""
