# éš¾ç‚¹ï¼šä¸è¿ç»­é—®é¢˜
# ä¸€æ—¦æ¶‰åŠåˆ°å­åºåˆ—å’Œæœ€å€¼ï¼Œé‚£å‡ ä¹å¯ä»¥è‚¯å®šï¼Œè€ƒå¯Ÿçš„æ˜¯åŠ¨æ€è§„åˆ’æŠ€å·§ï¼Œæ—¶é—´å¤æ‚åº¦ä¸€èˆ¬éƒ½æ˜¯ O(n^2)ã€‚

ä¸€ã€ä¸¤ç§æ€è·¯

1ã€ç¬¬ä¸€ç§æ€è·¯æ¨¡æ¿æ˜¯ä¸€ä¸ªä¸€ç»´çš„ dp æ•°ç»„ï¼š

int n = array.length;
int[] dp = new int[n];

for (int i = 1; i < n; i++) {
    for (int j = 0; j < i; j++) {
        dp[i] = æœ€å€¼(dp[i], dp[j] + ...)
    }
}

æ¯”å¦‚æˆ‘ä»¬å†™è¿‡çš„ 
æœ€é•¿é€’å¢å­åºåˆ— å’Œ 
æœ€å¤§å­æ•°ç»„å’Œ éƒ½æ˜¯è¿™ä¸ªæ€è·¯ã€‚

åœ¨è¿™ä¸ªæ€è·¯ä¸­ dp æ•°ç»„çš„å®šä¹‰æ˜¯ï¼š
åœ¨å­æ•°ç»„ arr[0..i] ä¸­ï¼Œä»¥ arr[i] ç»“å°¾çš„å­åºåˆ—çš„é•¿åº¦æ˜¯ dp[i]ã€‚


2ã€ç¬¬äºŒç§æ€è·¯æ¨¡æ¿æ˜¯ä¸€ä¸ªäºŒç»´çš„ dp æ•°ç»„ï¼š
n = len(arr)
dp = [[0]*n for _ in range(n)]

for i in range(n):
    for j in range(n):
        if arr[i] == arr[j]:
            dp[i][j] = dp[i][j] + ...
        else:
            # è®¡ç®—æœ€å€¼
            dp[i][j] = min(...)

è¿™ç§æ€è·¯è¿ç”¨ç›¸å¯¹æ›´å¤šä¸€äº›ï¼Œå°¤å…¶æ˜¯æ¶‰åŠä¸¤ä¸ªå­—ç¬¦ä¸²/æ•°ç»„çš„å­åºåˆ—æ—¶ï¼Œæ¯”å¦‚å‰æ–‡è®²çš„ 
æœ€é•¿å…¬å…±å­åºåˆ— å’Œ 
ç¼–è¾‘è·ç¦»ï¼›è¿™ç§æ€è·¯ä¹Ÿå¯ä»¥ç”¨äºåªæ¶‰åŠä¸€ä¸ªå­—ç¬¦ä¸²/æ•°ç»„çš„æƒ…æ™¯ï¼Œæ¯”å¦‚æœ¬æ–‡è®²çš„å›æ–‡å­åºåˆ—é—®é¢˜ã€‚

2.1 æ¶‰åŠä¸¤ä¸ªå­—ç¬¦ä¸²/æ•°ç»„çš„åœºæ™¯ï¼Œdp æ•°ç»„çš„å®šä¹‰å¦‚ä¸‹ï¼š
    åœ¨å­æ•°ç»„ arr1[0..i] å’Œå­æ•°ç»„ arr2[0..j] ä¸­ï¼Œæˆ‘ä»¬è¦æ±‚çš„å­åºåˆ—é•¿åº¦ä¸º dp[i][j]ã€‚

2.2 åªæ¶‰åŠä¸€ä¸ªå­—ç¬¦ä¸²/æ•°ç»„çš„åœºæ™¯ï¼Œdp æ•°ç»„çš„å®šä¹‰å¦‚ä¸‹ï¼š
    åœ¨å­æ•°ç»„ array[i..j] ä¸­ï¼Œæˆ‘ä»¬è¦æ±‚çš„å­åºåˆ—çš„é•¿åº¦ä¸º dp[i][j]ã€‚


ä¾‹é¢˜ï¼šæœ€é•¿å›æ–‡å­åºåˆ—
çŸ¥é“äº†å­é—®é¢˜ dp[i+1][j-1] çš„ç»“æœï¼ˆs[i+1..j-1] ä¸­æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ï¼‰ï¼Œä½ æ˜¯å¦èƒ½æƒ³åŠæ³•ç®—å‡º dp[i][j] çš„å€¼ï¼ˆs[i..j] ä¸­ï¼Œæœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ï¼‰å‘¢ï¼Ÿ
å¯ä»¥ï¼è¿™å–å†³äº s[i] å’Œ s[j] çš„å­—ç¬¦ï¼š
å¦‚æœå®ƒä¿©ç›¸ç­‰ï¼Œé‚£ä¹ˆå®ƒä¿©åŠ ä¸Š s[i+1..j-1] ä¸­çš„æœ€é•¿å›æ–‡å­åºåˆ—å°±æ˜¯ s[i..j] çš„æœ€é•¿å›æ–‡å­åºåˆ—ï¼š
å¦‚æœå®ƒä¿©ä¸ç›¸ç­‰ï¼Œè¯´æ˜å®ƒä¿©ä¸å¯èƒ½åŒæ—¶å‡ºç°åœ¨ s[i..j] çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸­ï¼Œé‚£ä¹ˆæŠŠå®ƒä¿©åˆ†åˆ«åŠ å…¥ s[i+1..j-1] ä¸­ï¼Œçœ‹çœ‹å“ªä¸ªå­ä¸²äº§ç”Ÿçš„å›æ–‡å­åºåˆ—æ›´é•¿å³å¯ï¼š

"""
ç¬¬ä¸€å¼ å›¾ï¼š
å­—ç¬¦ä¸²ä¸ºï¼š['c', 'b', 'x', 'a', 'b', 'y', 'c']
           i   i+1             j-1   j

å¦‚æœ s[i] == s[j]ï¼Œé‚£ä¹ˆ s[i..j] çš„æœ€é•¿å›æ–‡å­åºåˆ—é•¿åº¦å¯ä»¥ç”± dp[i+1][j-1] è½¬ç§»è¿‡æ¥ï¼Œ
ä¹Ÿå°±æ˜¯ dp[i][j] = dp[i+1][j-1] + 2ã€‚


ç¬¬äºŒå¼ å›¾ï¼š
å­—ç¬¦ä¸²ä¸ºï¼š['a', 'b', 'x', 'a', 'b', 'y', 'b']
           i   i+1             j-1   j

å¦‚æœ s[i] != s[j]ï¼Œè¯´æ˜å®ƒä»¬ä¸èƒ½åŒæ—¶å‡ºç°åœ¨åŒä¸€ä¸ªå›æ–‡å­åºåˆ—ä¸­ï¼Œ
æˆ‘ä»¬éœ€è¦åœ¨ s[i+1..j] å’Œ s[i..j-1] ä¸­é€‰æ‹©ä¸€ä¸ªè¾ƒé•¿çš„å›æ–‡å­åºåˆ—ï¼š
å³ dp[i][j] = max(dp[i+1][j], dp[i][j-1])

"""

if (s[i] == s[j])
    // å®ƒä¿©ä¸€å®šåœ¨æœ€é•¿å›æ–‡å­åºåˆ—ä¸­
    dp[i][j] = dp[i + 1][j - 1] + 2;
else
    // s[i+1..j] å’Œ s[i..j-1] è°çš„å›æ–‡å­åºåˆ—æ›´é•¿ï¼Ÿ
    dp[i][j] = max(dp[i + 1][j], dp[i][j - 1]);
    

ä¸ºäº†ä¿è¯æ¯æ¬¡è®¡ç®— dp[i][j]ï¼Œå·¦ä¸‹å³æ–¹å‘çš„ä½ç½®å·²ç»è¢«è®¡ç®—å‡ºæ¥ï¼Œåªèƒ½æ–œç€éå†æˆ–è€…åç€éå†ï¼š

ğŸ§­ é‚£ä¹ˆéå†é¡ºåºå°±éå¸¸é‡è¦äº†ï¼
âŒ é”™è¯¯éå†ï¼ˆi ä»ä¸Šå¾€ä¸‹ï¼‰ï¼š

for i in range(n):
    for j in range(i, n):
        dp[i][j] = ... # ä¼šä¾èµ– dp[i+1][j]ï¼Œä½†å®ƒè¿˜æ²¡ç®—

â†’ è¿™æ ·å½“ä½ è®¡ç®— dp[0][3] æ—¶ï¼Œdp[1][3] è¿˜æ²¡æœ‰å€¼ï¼Œä¼šå‡ºé”™ï¼


âœ… æ­£ç¡®éå†ï¼šä»ä¸‹å¾€ä¸Šã€ä»å·¦å¾€å³

for i in range(n-1, -1, -1):        # i é€’å‡ï¼Œä»ä¸‹å¾€ä¸Š
    for j in range(i, n):           # j é€’å¢ï¼Œä»å·¦åˆ°å³
        dp[i][j] = ...

è¿™ä¸ªé¡ºåºä¿è¯äº†ï¼š
    å½“ä½ è®¡ç®— dp[i][j] æ—¶ï¼š
        dp[i+1][j-1] å·²ç»ç®—è¿‡ï¼ˆå·¦ä¸‹ï¼‰
        dp[i+1][j] å·²ç»ç®—è¿‡ï¼ˆä¸‹ï¼‰
        dp[i][j-1] å·²ç»ç®—è¿‡ï¼ˆå·¦ï¼‰


ä¸ºäº†ä¿è¯æ¯æ¬¡è®¡ç®— dp[i][j]ï¼Œå·¦ä¸‹å³æ–¹å‘çš„ä½ç½®å·²ç»è¢«è®¡ç®—å‡ºæ¥ï¼Œåªèƒ½æ–œç€éå†æˆ–è€…åç€éå†ï¼š

# åç€
class Solution:
    def longestPalindromeSubseq(self, s: str) -> int:
        n = len(s)
        # dp æ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸º 0
        dp = [[0] * n for _ in range(n)]
        # base case
        for i in range(n):
            dp[i][i] = 1
        # åç€éå†ä¿è¯æ­£ç¡®çš„çŠ¶æ€è½¬ç§»
        for i in range(n - 1, -1, -1):
            for j in range(i + 1, n):
                # çŠ¶æ€è½¬ç§»æ–¹ç¨‹
                if s[i] == s[j]:
                    dp[i][j] = dp[i + 1][j - 1] + 2
                else:
                    dp[i][j] = max(dp[i + 1][j], dp[i][j - 1])
        # æ•´ä¸ª s çš„æœ€é•¿å›æ–‡å­ä¸²é•¿åº¦
        return dp[0][n - 1]

# æ–œç€
def longestPalindromeSubseq(s: str) -> int:
    n = len(s)
    dp = [[0] * n for _ in range(n)]

    # åˆå§‹åŒ–å¯¹è§’çº¿ï¼šå•ä¸ªå­—ç¬¦æ˜¯å›æ–‡ï¼Œé•¿åº¦ä¸º 1
    for i in range(n):
        dp[i][i] = 1

    # æ–œç€å¡«è¡¨ï¼šéå†å­ä¸²é•¿åº¦
    for length in range(2, n + 1):  # å­ä¸²é•¿åº¦ä»2åˆ°n
        for i in range(n - length + 1):
            j = i + length - 1  # å³ç«¯ç‚¹
            if s[i] == s[j]:
                dp[i][j] = dp[i + 1][j - 1] + 2
            else:
                dp[i][j] = max(dp[i + 1][j], dp[i][j - 1])

    return dp[0][n - 1]
